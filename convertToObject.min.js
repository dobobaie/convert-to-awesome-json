var convertToObject=function(e){if(null==e||"string"!=typeof e)return null;var t=function(e,a){var u=!0===a?[]:{},o=null,r={key:null,value:null,curlyBracket:{in:!1,priority:0},quote:{hasLast:!1,type:"",in:!1,priority:0},separatorPast:!1,toNextPoint:!1,hadQuote:!1};if(null==e||"string"!=typeof e)return e;for(var n=0;void 0!=e[n];n++){switch(e[n]){case"[":case"{":if(1==r.quote.in){o+=e[n];break}if(1==r.toNextPoint){o+=e[n],r.curlyBracket.priority+=1;break}o="",r.toNextPoint=!0;break;case"}":case"]":if(1==r.quote.in){o+=e[n];break}if(0==r.toNextPoint)break;if(0!=r.curlyBracket.priority){o+=e[n],r.curlyBracket.priority-=1;break}r.toNextPoint=!1,r.value=new t(o,"]"==e[n]),o=null;case":":case"=":if(1==r.toNextPoint||1==r.quote.in){o+=e[n];break}r.hadQuote=!1,r.separatorPast=!0,r.key=null!=o?o:r.key,o=null;break;case"\n":case"\r":case",":case";":if(1==r.toNextPoint||1==r.quote.in){o+=e[n];break}i=null==r.value?o:r.value;if(!1===r.hadQuote&&null!=i)try{i=o=JSON.parse(i)}catch(e){}!0===a&&null!=i?u.push(i):!0!==a&&null!=i&&(null!=r.key?u[r.key]=i:u=i),o=null,r.hadQuote=!1,r.key=null,r.value=null,r.separatorPast=!1;break;case"'":case'"':case"`":if(1==r.toNextPoint||1==r.quote.in&&r.quote.type!=e[n]){o+=e[n];break}if(r.hadQuote=!0,0==r.quote.in){o="",r.quote.in=!0,r.quote.type=e[n],r.quote.priority+=1;break}r.quote.priority-=1,0==r.quote.priority&&(r.quote.hasLast=!0,r.quote.in=!1);continue;case" ":case"\t":if(1==r.toNextPoint||1==r.quote.in){o+=e[n];break}break;default:1==r.quote.hasLast&&(o+=r.quote.type,r.quote.priority+=1,r.quote.in=!0),o=null==o?e[n]:o+e[n]}r.quote.hasLast=!1}var i=null==r.value?o:r.value;if(!1===r.hadQuote&&null!=i)try{i=o=JSON.parse(i)}catch(e){}return!0===a&&null!=i?u.push(i):!0!==a&&null!=i&&(null!=r.key?u[r.key]=i:u=i),u};return new t(e)};module.exports=convertToObject;